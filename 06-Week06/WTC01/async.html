<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asychronous JavaScript</title>
</head>

<body>
    <h1>Asychronous JavaScript</h1>
    <button id="callback">Callback</button>
    <button id="promise">Promise</button>
    <button id="async">Async/Await</button>
    <script>
        // JavaScript Callbacks
        function close() {
            console.log('callback:close');
        }

        function signIn() {
            console.log('callback:signIn');
        }

        function open(nextStep) {
            console.log('callback:open');

            setTimeout(function () {
                nextStep();
            }, 2000)
        }

        document.getElementById('callback').addEventListener('click', function () {
            if (true) {
                open(close);
            } else {
                open(signIn);
            }
        });

        // JavaScript Promises
        function promise1() {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    resolve('promise:1');
                }, 2000)
            });
        }

        function promise2() {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    resolve('promise:2');
                }, 3000)
            });
        }
        document.getElementById('promise').addEventListener('click', function () {
            promise1().then(function (value) {
                console.log(value);
            });

            Promise.all([promise1(), promise2()]).then(function (values) {
                console.log(values);
            });

            console.log('promise:click');
        });

        // JavaScript Async/Await
        async function getposts() {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    resolve([{
                        title: 'HTML Nedir?',
                        slug: 'html-nedir',
                    }, {
                        title: 'CSS Nedir?',
                        slug: 'css-nedir',
                    }])
                }, 2000);
            });
        }

        async function getuser() {
            return new Promise(function (resolve, reject) {
                setTimeout(function () {
                    resolve({
                        name: 'Yaşar Can',
                        surname: 'Damlı',
                        username: "yasarcandamli"
                    })
                }, 2000)
            });
        };

        async function getdata() {
            var user = await getuser();
            console.log('async:user', user);

            var posts = await getposts();
            console.log('async:posts', posts);
        };

        document.getElementById('async').addEventListener('click', function () {
            getdata();
        });

    </script>
</body>

</html>