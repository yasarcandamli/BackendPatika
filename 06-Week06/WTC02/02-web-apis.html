<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript - Web APIs</title>
</head>

<body>
    <h1>JavaScript - Web APIs</h1>
    <h2>WEB History API</h2>
    <button onclick="back()">Go Back</button>
    <button onclick="go()">Go Back 2 Pages</button>
    <button onclick="forward()">Go Forward</button>

    <h2>WEB Storage API</h2>
    <button onclick="setItem()">Set Item</button>
    <button onclick="getItem()">Get Item</button>
    <button onclick="removeItem()">Remove Item</button>

    <h2>WEB Fetch API</h2>
    <button onclick="fetchUsers()">Fetch Users</button>

    <h2>WEB Notification API</h2>
    <button onclick="notifyme()">Notify Me</button>

    <script>
        // Web History API
        function back() {
            history.back();
        }

        function go() {
            history.go(-2);
        }

        function forward() {
            history.forward();
        }

        // Web Storage API
        function setItem() {
            // Local storage
            localStorage.setItem('name', 'Yaşar Can');
            // Session storage
            sessionStorage.setItem('name', 'Gökdeniz');
        }
        function getItem() {
            // Local storage
            console.log('local: ', localStorage.getItem('name'));
            // Session storage
            console.log('session: ', sessionStorage.getItem('name'));
        }
        function removeItem() {
            // Local storage
            localStorage.removeItem('name');
            // Session storage
            sessionStorage.removeItem('name');
        }

        // Web Fetch API
        function fetchUsers() {
            fetch('https://jsonplaceholder.typicode.com/users')
                .then(function (response) {
                    return response.json();
                })
                .then(function (users) {
                    console.log('users: ', users);
                })
        }

        // Web Notification API
        function sayHi() {
            const notificaiton = new Notification('Merhaba Yaşar Can!')
        }

        function notifyme() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    sayHi();
                } else if (Notification.permission === 'denied') {
                    console.log('Bildirim izni verilmedi.');
                } else {
                    console.log('Notification API için izin iste.')
                    Notification.requestPermission().then((permission) => {
                        if (permission === 'granted') {
                            sayHi();
                        }
                    })
                }
            } else {
                console.log('Notificaiton API desteklemiyor.');
            }
        };
    </script>
</body>

</html>